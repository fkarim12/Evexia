<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Evexia</title>
    <link rel="stylesheet" href="stylesAll.css" />
    <link rel="stylesheet" href="visualizations.css" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.9.4/Chart.js"></script>
  </head>
  <body>
    <main>
      <div class="graph-container1" style = "margin-left: 40px; margin-right: 40px;">
        <h1>Caloric Intake Over the Last Week</h1>
        <canvas id="calorie-chart"></canvas>
      </div>
      <script src="visualizations.js"></script>
      <br>
      <br>
      <div class="graph-container2" style = "margin-left: 40px; margin-right: 40px;">
        <h1>Weight Over the Past Year</h1>
        <canvas id="weightChart"></canvas>
      </div>   

    <form id = "weightForm">
      <h3 text-align = "left">Add New Weight Entry</h3> 
        <label id = "monthLabel" for="monthSelect">Month:</label><br>
        <select name="monthSelect" id="monthSelect" required style="width:485.27px;">
          <option value="0">Jan</option>
          <option value="1">Feb</option>
          <option value="2">Mar</option>
          <option value="3">Apr</option>
          <option value="4">May</option>
          <option value="5">Jun</option>
          <option value="6">Jul</option>
          <option value="7">Aug</option>
          <option value="8">Sep</option>
          <option value="9">Oct</option>
          <option value="10">Nov</option>
          <option value="11">Dec</option>
      </select><br>

      <label id= "dateLabel" for="date">Date:</label>
      <br>
      <input type="date" id="date" name="date" required><br> 

      <label for="weight">Enter Weight:</label><br>
      <input type="number" id="weight" name="weight" required onclick="showKeyboard(event, 'keyboardImage')"><br>

      <button id = "enter" type="submit">Add Weight Data</button>
    </form>
    <img id="keyboardImage" src="screenKeyboard.png" alt="keyboard">

    
    <script>
      const months = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'June', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'];

      const weightData = {
      labels: months, 
      datasets: [{
        label: 'Weight in lbs',
        backgroundColor: 'rgba(0, 123, 255, 0.5)',
        borderColor: 'rgba(0, 123, 255, 1)',
        data: [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
      }]
    };

      const weightChart = new Chart(document.getElementById('weightChart'), {
        type: 'bar',
        data: weightData,
        options: {
          scales: {
            yAxes: [{
            ticks: {
                beginAtZero: true,
                suggestedMax: 250
              }
            }]
          },
          responsive: true,
          maintainAspectRatio: false,
          plugins: {
            title: {
              display: true,
              text: 'Annual Weight Tracker Graph'
            }
          }
        },
      }
      );

      document.getElementById('weightForm').addEventListener('submit', function(event) {
        event.preventDefault();

        const monthSelect = document.getElementById('monthSelect');

        const index = parseInt(monthSelect.value);

        const weight = parseInt(document.getElementById('weight').value);
      
        const date = document.getElementById('date').value;

        weightChart.data.datasets[0].data[index] = weight;
        weightChart.data.labels[index] = months[index] + `(${date})`;
        weightChart.update();
    });
  </script>
  </main>
  <nav>
    <ul>
      <a href="./index.html"><img src="food.jpg" alt="Home" class="nav-icon" /></a>
      <a href="./intakeBreakdown.html"><img src="macronutrients.png" alt="Calorie Intake" class="nav-icon" /></a>
      <a href="./visualizations.html" class="active"><img src="visualizations.png" alt="Visualizations" class="nav-icon" /></a>
      <a href="./sleepTracker.html"><img src="sleep.jpg" alt="Sleep Tracker" class="nav-icon" /></a>
      <a href="./userProfile.html"><img src="profile.png" alt="User Profile" class="nav-icon" /></a>
    </ul>
  </nav>
</body>
</html>